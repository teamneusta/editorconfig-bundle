<div id="neusta_areabrick_config">
    <table>
        <thead>
        <tr>
            <th>{{ 'neusta_pimcore_areabrick_config.areabricks.overview.table.col_headers.name'|trans }}</th>
            <th>{{ 'neusta_pimcore_areabrick_config.areabricks.overview.table.col_headers.id'|trans }}</th>
            <th>{{ 'neusta_pimcore_areabrick_config.areabricks.overview.table.col_headers.version'|trans }}</th>
            <th>{{ 'neusta_pimcore_areabrick_config.areabricks.overview.table.col_headers.template'|trans }}</th>
            <th>{{ 'neusta_pimcore_areabrick_config.areabricks.overview.table.col_headers.pages'|trans|raw }}</th>
            {% if hasAdditionalProperties %}
                <th>{{ 'neusta_pimcore_areabrick_config.areabricks.overview.table.col_headers.additional_properties'|trans }}</th>
            {% endif %}
        </tr>
        </thead>
        <tbody>
        {% for brick in bricks %}
            <tr>
                <td>{{ brick.name }}</td>
                <td>{{ brick.id }}</td>
                <td>{{ brick.version }}</td>
                <td>{{ brick.template }}</td>
                {% if hasAdditionalProperties %}
                    <td>
                        {% set published_pages = brick.pages|filter(page => page.published) %}
                        {% set unpublished_pages = brick.pages|filter(page => not page.published) %}

                        {% if published_pages|length > 0 %}
                            <!-- Published Pages Accordion -->
                            <div>
                                <button class="accordion">Published Pages</button>
                                <div class="panel">
                                    <ul>
                                        {% for page in published_pages %}
                                            <li>
                                                <a href="#" data-page-id="{{ page.id }}"
                                                   data-page-type="{{ page.type }}">{{ page.url }}</a>
                                                <a href="{{ page.url }}"></a>
                                            </li>
                                        {% endfor %}
                                    </ul>
                                </div>
                            </div>
                        {% endif %}

                        {% if unpublished_pages|length > 0 %}
                            <!-- Unpublished Pages Accordion -->
                            <div>
                                <button class="accordion">Unpublished Pages</button>
                                <div class="panel">
                                    <ul>
                                        {% for page in unpublished_pages %}
                                            <li class="strike-through">
                                                <a href="#" data-page-id="{{ page.id }}"
                                                   data-page-type="{{ page.type }}">{{ page.url }}</a>
                                            </li>
                                        {% endfor %}
                                    </ul>
                                </div>
                            </div>
                        {% endif %}
                    </td>
                    <td>
                        <ul>
                            {% for additionalProperty in brick.additionalProperties %}
                                <li class="{% if additionalProperty.name == 'tags' %}highlight-tag{% elseif additionalProperty.name == 'groups' %}highlight-group{% endif %}">
                                    {{ additionalProperty.name }}: {{ additionalProperty.value }}
                                </li>
                            {% else %}
                                <li>{{ 'neusta_pimcore_areabrick_config.areabricks.overview.table.no_additional_properties'|trans }}</li>
                            {% endfor %}
                        </ul>
                    </td>
                {% endif %}
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
